<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <TargetFramework>$(DotNetAndroidTargetFramework)</TargetFramework>
    <SupportedOSPlatformVersion>24</SupportedOSPlatformVersion>
    <OutputType>Exe</OutputType>
    <Nullable>enable</Nullable>
    <ImplicitUsings>enable</ImplicitUsings>
    <ApplicationId>Xamarin.Android.BindingRuntime_Tests</ApplicationId>
    <ApplicationVersion>1</ApplicationVersion>
    <ApplicationDisplayVersion>1.0</ApplicationDisplayVersion>
    <RootNamespace>Xamarin.Android.BindingRuntime_Tests</RootNamespace>
  </PropertyGroup>
  
  <Import Project="..\..\..\Configuration.props" />

  <PropertyGroup>
    <OutputPath>..\..\..\bin\Test$(Configuration)</OutputPath>
  </PropertyGroup>

  <ItemGroup>
    <None Remove="Java\DefaultMethodsInterface.java" />
    <None Remove="Java\StaticMethodsInterface.java" />
  </ItemGroup>

  <ItemGroup>
    <AndroidLibrary Update="Jars\org.jetbrains.kotlin.kotlin-stdlib.jar" Bind="False" />
  </ItemGroup>

  <ItemGroup>
    <ProjectReference Include="..\..\..\src\Xamarin.Android.NUnitLite\Xamarin.Android.NUnitLite.NET.csproj" />
  </ItemGroup>

  <ItemGroup>
    <AndroidNamespaceReplacement Include="xamarin.example" Replacement="Example" />
    <AndroidNamespaceReplacement Include="com.example" Replacement="Transformed.Namespace" />
  </ItemGroup>

  <PropertyGroup>
    <_PackageName>$(ApplicationId)</_PackageName>
  </PropertyGroup>

  <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Debug|AnyCPU'">
    <EmbedAssembliesIntoApk>True</EmbedAssembliesIntoApk>
  </PropertyGroup>

  <ItemGroup>
    <TestApk Include="$(OutputPath)$(ApplicationId)-Signed.apk">
      <Package>$(ApplicationId)</Package>
      <TimingDefinitionsFilename>$(MSBuildThisFileDirectory)..\..\..\build-tools\scripts\TimingDefinitions.txt</TimingDefinitionsFilename>
      <TimingResultsFilename>$(MSBuildThisFileDirectory)..\..\..\TestResult-Xamarin.Android.BindingRuntime_Tests-times.csv</TimingResultsFilename>
    </TestApk>
  </ItemGroup>

  <ItemGroup>
    <TestApkInstrumentation Include="xamarin.android.bindingruntime.TestInstrumentation">
      <Package>$(ApplicationId)</Package>
      <ResultsPath>$(OutputPath)TestResult-Xamarin.Android.BindingRuntime_Tests.xml</ResultsPath>
    </TestApkInstrumentation>

    <TestApkPermission Include="READ_EXTERNAL_STORAGE">
      <Package>$(ApplicationId)</Package>
    </TestApkPermission>

    <TestApkPermission Include="WRITE_EXTERNAL_STORAGE">
      <Package>$(ApplicationId)</Package>
    </TestApkPermission>
  </ItemGroup>

  <Import Project="..\..\..\build-tools\scripts\TestApks.targets" />

</Project>